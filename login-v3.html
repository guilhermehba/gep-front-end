<!doctype html>
<html lang="pt">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="SHORTCUT ICON" href="http://teste.ergonsistemas.com.br/gepweb_d.dll/cache/gepweb_e_exe/n2/favicon.ico">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <title>Página de Login</title>

    <link rel="stylesheet" href="css/login.css">
    <script src="js/login.js"></script>
</head>

<body>
    <div class="container">
        <div class="container-login">
            <div class="images-login">
                <img src="assets/img/imagem.svg" class="mascote" alt="mascote-professor-direita">
                <div class="image-background"></div>
            </div>

            <div class="form-login">
                <form class="row g-3 needs-validation" action="#" novalidate>
                    <div class="col-md-12">
                        <label for="validationCustom01" class="form-label">Usuário:</label>
                        <input type="text" class="form-control" id="validationCustom01" placeholder="Digite o CPF"
                            onBlur="digitouCpf()" onkeyup="is14()" required>
                    </div>

                    <div class="col-md-12">
                        <label for="validationCustom02">Local:</label>
                        <select class="form-select municipio" id="validationCustom02" required
                            aria-label="select example">
                            <option value="">Selecione o local</option>

                        </select>
                    </div>

                    <div class="col-md-12">
                        <label for="validationCustom03" class="form-label">Senha</label>
                        <input type="password" class="form-control" id="validationCustom03" required>
                    </div>

                    <div class="col-md-12">
                        <label for="validationCustom04">Ano letivo:</label>
                        <select class="form-select ano-letivo" id="validationCustom04" required
                            aria-label="select example">
                            <script>renderOptionAnoLetivo()</script>
                        </select>
                    </div>

                    <div class="d-flex justify-content-center">
                        <button class="btn btn-ergon" type="submit">Entrar</button>
                    </div>
                </form>

                <div class="col-12 campo-btn-recuperar-senha d-flex justify-content-center mt-2">
                    <a class="btn recuperar-senha" data-bs-toggle="modal" data-bs-target="#ModalEmail">Esqueceu a
                        senha?</a>
                </div>

                <!-- valida formulário -->
                <script>
                        const cpf = document.querySelector("#validationCustom01");

                        cpf.addEventListener("keyup", () =>{
                            let value = cpf.value.replace(/[^0-9]/g, "").replace(/^([\d]{3})([\d]{3})?([\d]{3})?([\d]{2})?/, "$1.$2.$3-$4");

                            cpf.value = value;
                        });

                        // Example starter JavaScript for disabling form submissions if there are invalid fields
                        (function () {
                            'use strict'

                            // Fetch all the forms we want to apply custom Bootstrap validation styles to
                            var forms = document.querySelectorAll('.needs-validation')

                            // Loop over them and prevent submission
                            Array.prototype.slice.call(forms)
                                .forEach(function (form) {
                                    form.addEventListener('submit', function (event) {
                                        if (!form.checkValidity()) {
                                            event.preventDefault()
                                            event.stopPropagation()
                                        } else {
                                            let usuario = document.querySelector("#validationCustom01")
                                            let municipio = document.querySelector("#validationCustom02")
                                            let senha = document.querySelector("#validationCustom03")

                                            //entrar(usuario, municipio, senha)

                                            console.log(municipio.value);
                                            console.log(usuario.value);

                                            selecionaEscola(usuario, municipio, senha);
                                        }

                                        form.classList.add('was-validated')
                                    }, false)
                                })
                        })();

                        function is14(){
                            //form.classList.add('was-validated')
                        }
                </script>
            </div>
        </div>
    </div>

    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
    -->
</body>

</html>